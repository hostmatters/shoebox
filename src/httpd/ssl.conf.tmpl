<VirtualHost *:80>

ServerName @SUBDOMAIN.@YOUR_DOMAIN
ServerAlias www.@SUBDOMAIN.@YOUR_DOMAIN

RewriteEngine On 
RewriteCond %{HTTPS} !=on 
RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,NE,L]

</VirtualHost>


<VirtualHost *:443>

ServerName @SUBDOMAIN.@YOUR_DOMAIN
ServerAlias www.@SUBDOMAIN.@YOUR_DOMAIN

# Logging
LogLevel warn
ErrorLog /var/log/httpd/@SUBDOMAIN.@YOUR_DOMAIN-error_log
CustomLog /var/log/httpd/@SUBDOMAIN.@YOUR_DOMAIN-access_log combined

# Reverse proxy configuration
<Location />
ProxyPass http://localhost:@SVC_PORT/
ProxyPassReverse http://localhost:@SVC_PORT/
</Location>

Include /etc/letsencrypt/options-ssl-apache.conf

</VirtualHost>
